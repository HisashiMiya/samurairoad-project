@media(min-width:980px){.wrap{grid-template-columns: 1fr 360px;align-items:start}}

@media(max-width:979px){
      .chatToggle{display:inline-flex}
      aside.card{display:none}
      body.chatOpen aside.card{
        display:block;
        position:fixed;
        left:10px; right:10px; bottom:10px;
        top:auto;
        max-height:62vh;
        overflow:hidden;
        z-index:50;
        border-radius:18px;
        box-shadow:0 16px 44px rgba(0,0,0,.45);
      }
      body.chatOpen .chatLog{height:38vh}
    }

    /* --- Mobile UX Improvements --- */
@media (max-width: 980px) {
  /* 盤面の余白を極限まで減らして大きく表示 */
  #gamePanel { padding: 8px 4px !important; }
  
  /* 持ち駒（ボタン）を大きくしてタップしやすく */
  .chip {
    padding: 8px 14px;
    font-size: 1rem;
    min-height: 44px; /* 指の太さを考慮 */
  }
  
  /* 手番表示をコンパクトに */
  .badge.turnBig {
    padding: 6px 12px;
    font-size: 0.95rem;
    width: 100%;
    justify-content: center;
  }

  /* 盤面の下部スペース確保（誤操作防止） */
  .hint { margin-bottom: 80px; } /* チャットボタンと被らないように */
}

/* AI解析結果モーダル用のスタイル */
#aiResultModal {
  display: none; position: fixed; inset: 0; z-index: 10100;
  background: rgba(0,0,0,0.8); overflow-y: auto;
  padding: 20px 10px;
}
.ai-content {
  background: #1c2a55; border: 1px solid rgba(122,162,255,0.3);
  border-radius: 12px; max-width: 600px; margin: 0 auto;
  padding: 20px; color: #e8eefc;
}
.ai-section { margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 12px; }
.ai-bad { color: #ff8888; font-weight: bold; }
.ai-good { color: #88ff88; font-weight: bold; }
.ai-loading { text-align: center; padding: 40px; font-size: 1.2rem; }